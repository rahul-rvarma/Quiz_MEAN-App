<div class="container py-4">
  <button class="btn btn-link mb-3" routerLink="/">‚Üê Back</button>

  <h4>{{ title }}</h4>
  <div *ngIf="loading">Loading questions...</div>
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <form *ngIf="!loading && questions.length">
    <div *ngFor="let q of questions; let i = index" class="mb-3">
      <p class="mb-1"><strong>{{ i + 1 }}.</strong> {{ q.text }}</p>
      <div class="btn-group-vertical w-100" role="group">
        <label *ngFor="let opt of q.options; let j = index" class="btn btn-outline-secondary text-start mb-1"
               [class.active]="answers[i] === j">
          <input type="radio" [checked]="answers[i] === j" (click)="selectAnswer(i, j)" style="display:none" />
          {{ opt }}
        </label>
      </div>
    </div>

    <div *ngIf="!submitted" class="mt-3">
      <button type="button" class="btn btn-success" (click)="submit()">Submit</button>
    </div>
  </form>

  <div *ngIf="submitted && result" class="mt-4">
    <h5>Score: {{ result.score }}%</h5>
    <p>{{ result.correct }} / {{ result.total }} correct</p>
    <div *ngFor="let d of result.detail">
      <div>
        Question {{ d.index + 1 }} - <span [class.text-success]="d.isCorrect" [class.text-danger]="!d.isCorrect">
          {{ d.isCorrect ? 'Correct' : 'Wrong' }}
        </span>
      </div>
    </div>
  </div>
</div>
